<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAKANAYA JAPON - PRODUCT LIST</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body>
    <header>
        <h1>SAKANAYA JAPON</h1>
        <h2>PRODUCT LIST</h2>
        <p class="update">UPDATE: 2026/01/08</p>
    </header>

    <nav>
        <button onclick="filterCategory('ALL')">ALL</button>
        <button onclick="filterCategory('FRESH')">FRESH</button>
        <button onclick="filterCategory('FROZEN')">FROZEN</button>
    </nav>

    <div id="product-container" class="container">
        </div>

    <script>
        let allProducts = [];

        // CSVを読み込む関数
        Papa.parse("products.csv", {
            download: true,
            header: true,
            complete: function(results) {
                allProducts = results.data;
                displayProducts(allProducts);
            }
        });

        function displayProducts(products) {
            const container = document.getElementById('product-container');
            container.innerHTML = '';
            products.forEach(p => {
                if(!p.name) return;
                const card = `
                    <div class="card">
                        <img src="${p.image}" alt="${p.name}">
                        <div class="info">
                            <span class="code">${p.code}</span>
                            <span class="category ${p.category}">${p.category}</span>
                            <h3>${p.name}</h3>
                            <p class="comment">${p.comment}</p>
                            <p class="price">${p.price}</p>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        }

        function filterCategory(cat) {
            if(cat === 'ALL') {
                displayProducts(allProducts);
            } else {
                const filtered = allProducts.filter(p => p.category === cat);
                displayProducts(filtered);
            }
        }
    </script>
</body>
</html>
