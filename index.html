<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAKANAYA JAPON - PRODUCT LIST</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <img src="images/logo.jpg" alt="SAKANAYA JAPON" class="logo">
            
            <div class="contact-area">
                <a href="tel:000-000-0000" class="tel-link">ğŸ“ 016-881-370</a>
                <div class="btns">
    <a href="https://t.me/SAKANAYAJAPON_SUPPORT" target="_blank" class="telegram-btn">Telegram</a>
</div>
            </div>

            <h2 class="title-main">PRODUCT LIST</h2>
            <p class="update-date">UPDATE: 2026/01/08</p>
        </div>
    </header>

   <nav>
    <button class="nav-btn active" onclick="filterCategory('ALL', this)">ALL</button>
    <button class="nav-btn" onclick="filterCategory('FRESH', this)">FRESH</button>
    <button class="nav-btn" onclick="filterCategory('FROZEN', this)">FROZEN</button>
    <button class="nav-btn" onclick="filterCategory('JAPAN', this)">JAPAN Farmed</button> 
</nav>

    <div class="notice-area">
        <div class="notice-box">
            <h4>ã€ FRESH PRODUCTS NOTICE ã€‘</h4>
            <p>
                <strong>JP:</strong> FRESHã«é–¢ã—ã¦ã¯ã€ãƒ•ã‚£ãƒ¬ã‹ã‚‰ã”æ³¨æ–‡é ‚ã‘ã¾ã™ã€‚ã¾ãŸã€ãƒ›ãƒ¼ãƒ«ã«é–¢ã—ã¦ã¯ä¸‹å‡¦ç†ï¼ˆå†…è‡“å‡¦ç†ã€è¡€æŠœãï¼‰ã‚’ã—ã¦ãŠå±Šã‘ã—ã¦ãŠã‚Šã¾ã™ã€‚<br>
                <strong>EN:</strong> Fresh fish can be ordered as fillets. For whole fish, we deliver them pre-processed (gutted and bled).
            </p>
        </div>
    </div>
    <div id="product-container" class="container"></div>

    <section class="map-section">
        <h3>STORE LOCATION</h3>
        <div class="map-container">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d32021054.573746197!2d71.17280509999998!3d11.564748199999997!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x310951653c292489%3A0x20508e114c68ae7c!2z4Z6g4Z624Z6E4Z6P4Z-S4Z6a4Z644Z6H4Z6U4Z-J4Z674Z6T4oCLIFNha2FuYXlh4oCLIOKAi0phcG9u!5e0!3m2!1sja!2skh!4v1767958543339!5m2!1sja!2skh" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>

    <footer>
        <p>Â© 2026 SAKANAYA JAPON</p>
    </footer>

    <script>
    let allProducts = [];
    Papa.parse("products.csv", {
        download: true,
        header: true,
        skipEmptyLines: true,
        transformHeader: function(h) { return h.trim(); },
        complete: function(results) {
            allProducts = results.data;
            displayProducts(allProducts);
        }
    });

    // displayProducts é–¢æ•°å†…ã®ä¿®æ­£ï¼ˆä¾¡æ ¼ã®ä¸‹ã«æ•°é‡å…¥åŠ›ã‚’è¿½åŠ ï¼‰
function displayProducts(products) {
    const container = document.getElementById('product-container');
    container.innerHTML = '';
    products.forEach((p, index) => {
        if(!p.name) return;

        let safeName = p.name.replace(/</g, "&lt;").replace(/>/g, "&gt;");
        let formattedComment = (p.comment || '').replace(/ã€‚/g, 'ã€‚<br><span class="en-comment">') + '</span>';

        const card = `
            <div class="card">
                <div class="img-wrapper">
                    <img src="${p.image ? p.image.trim() : ''}" alt="${safeName}">
                    <span class="category-tag ${p.category}">
                        <img src="images/${p.category === 'JAPAN' ? 'jp-flag.png' : 'kh-flag.png'}" alt="flag" style="width: 20px; border: 1px solid #fff; border-radius: 2px; margin-right: 6px;">
                        ${p.category}
                    </span>
                </div>
                <div class="info">
                    <span class="code">Code: ${p.code}</span>
                    <h3>${safeName}</h3>
                    <div class="comment-box">${formattedComment}</div>
                    
                    <div class="price-size-area">
                        <p class="price">$${Number(p.price).toLocaleString()} <span class="unit-text">/ ${p.unit || 'pc'}</span></p>
                        ${(p.size && p.size !== 'size') ? `<p class="size-detail">Size: ${p.size}</p>` : ''}
                        
                        <div class="calc-area">
                            <label>Qty:</label>
                            <input type="number" class="qty-input" min="0" value="0" 
                                   data-price="${p.price}" 
                                   onchange="updateTotal()" oninput="updateTotal()">
                        </div>
                    </div>
                </div>
            </div>
        `;
        container.innerHTML += card;
    });
}

// åˆè¨ˆé‡‘é¡ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
function updateTotal() {
    let total = 0;
    const inputs = document.querySelectorAll('.qty-input');
    inputs.forEach(input => {
        const price = parseFloat(input.getAttribute('data-price')) || 0;
        const qty = parseFloat(input.value) || 0;
        total += price * qty;
    });
    
    document.getElementById('total-amount').innerText = total.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
    
    // åˆè¨ˆãŒ0ã‚ˆã‚Šå¤§ãã„æ™‚ã ã‘ãƒãƒ¼ã‚’è¡¨ç¤º
    const bar = document.getElementById('total-bar');
    if (total > 0) {
        bar.classList.add('show');
    } else {
        bar.classList.remove('show');
    }
}
    function filterCategory(cat, btn) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        cat === 'ALL' ? displayProducts(allProducts) : displayProducts(allProducts.filter(p => p.category === cat));
    }
</script>
</body>
    <div id="total-bar" class="total-bar">
    <div class="total-content">
        <span class="total-label">Estimated Total:</span>
        <span class="total-price">$ <span id="total-amount">0.00</span></span>
    </div>
    <p class="total-note">*Excluding Delivery Fee</p>
</div>
</html>
